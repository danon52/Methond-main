<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/jetbrains-mono-font@1.0.0/css/jetbrains-mono.min.css" rel="stylesheet">
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"> -->
    <link rel="stylesheet" href="	https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js">

</head>

<body>
    <style>
        body {
            font-family: 'JetBrains Mono', monospace;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e6e6e6;
            min-height: 100vh;
        }
    </style>
    <div>
        <p class="Method"> Method
            <img class="img" src="image/Javascript.svg" alt="">
        </p>
    </div>
    <script src="index.js">
    </script>
    <div class="form-container">
        <div class="input-group">
            <label>Имя пользователя</label>
            <input type="text" style="width: 217px; height: 24px;">
        </div>
        <div class="input-group">
            <label>Пароль</label>
            <input type="password" style="width: 217px; height: 24px;">
        </div>
        <button class="button_1"> <a class="MAIN" href="main_file.html">Войти</a></button>
        <!-- <button type="button"> <a class="button">Войти</a></button> -->
        <div class="register-link">
            у меня нет аккаунта! <a href="new_user.html">Создать</a>
        </div>
    </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Инициализация "базы данных" пользователей, если её нет
            if (!localStorage.getItem('usersDB')) {
                const initialUsers = [
                    {
                        username: "admin",
                        password: "admin123",
                        email: "admin@example.com"
                    }
                ];
                localStorage.setItem('usersDB', JSON.stringify(initialUsers));
            }

            const loginBtn = document.getElementById('loginBtn');
            const usernameInput = document.getElementById('username');
            const passwordInput = document.getElementById('password');
            const errorMessage = document.getElementById('errorMessage');

            loginBtn.addEventListener('click', function (e) {
                e.preventDefault();

                const username = usernameInput.value.trim();
                const password = passwordInput.value.trim();

                // Проверка на пустые поля
                if (!username || !password) {
                    showError("Пожалуйста, заполните все поля");
                    return;
                }

                // Получаем пользователей из localStorage
                const users = JSON.parse(localStorage.getItem('usersDB'));

                // Ищем пользователя
                const user = users.find(u => u.username === username && u.password === password);

                if (user) {
                    // Сохраняем текущего пользователя в localStorage
                    localStorage.setItem('currentUser', JSON.stringify(user));

                    // Перенаправляем на главную страницу
                    window.location.href = "main_file.html";
                } else {
                    showError("Неверное имя пользователя или пароль");
                }
            });

            function showError(message) {
                errorMessage.textContent = message;
                errorMessage.style.display = "block";

                // Скрываем сообщение через 5 секунд
                setTimeout(() => {
                    errorMessage.style.display = "none";
                }, 5000);
            }

            // Обработка нажатия Enter в полях ввода
            usernameInput.addEventListener('keypress', function (e) {
                if (e.key === 'Enter') loginBtn.click();
            });

            passwordInput.addEventListener('keypress', function (e) {
                if (e.key === 'Enter') loginBtn.click();
            });
        });
    </script>
</body>

</html>